# âš–ï¸ LawEase Backend

Backend API for **LawEase** - a platform designed to make legal information accessible and understandable for everyone, especially rural communities.

## ğŸŒŸ Overview

LawEase Backend provides a secure, scalable RESTful API that powers the LawEase platform. Built with Node.js and Express, it handles user authentication via OTP, manages legal resources, and facilitates communication between users and legal professionals.

### Key Highlights
- ğŸ” **Secure Authentication** - OTP-based login with JWT tokens
- ğŸ“± **SMS Integration** - Fast2SMS for OTP delivery
- ğŸ—„ï¸ **MongoDB Database** - Efficient data storage with Mongoose ODM
- ğŸ›¡ï¸ **Error Handling** - Centralized error management system
- ğŸ—ï¸ **Modular Architecture** - Clean, maintainable codebase

---

## ğŸ“‹ Table of Contents
- [Tech Stack](#-tech-stack)
- [Project Structure](#-project-structure)
- [Installation](#-installation--setup)
- [Environment Variables](#-environment-variables)
- [Running the Server](#-running-the-server)
- [Folder Breakdown](#-folder-breakdown)
- [Features Implemented](#-features-implemented)
- [Planned Features](#-planned-features)
- [API Documentation](#-api-documentation)
- [Contributing](#-contributing)
- [License](#-license)

---

## ğŸ› ï¸ Tech Stack

| Technology | Purpose |
|------------|---------|
| **Node.js** | Runtime environment |
| **Express.js** | Web framework |
| **MongoDB** | Database |
| **Mongoose** | ODM for MongoDB |
| **dotenv** | Environment variable management |
| **cors** | Cross-origin resource sharing |
| **nodemon** | Development auto-restart |

---

## ğŸ“ Project Structure

```
backend/
â”œâ”€â”€ public/
â”œâ”€â”€ src/
â”‚ â”œâ”€â”€ controllers/
â”‚ â”‚ â”œâ”€â”€ user.controller.js # Email/password user registration, login, and reset
â”‚ â”‚ â””â”€â”€ otp.controller.js # OTP send, verify, and login logic
â”‚ â”œâ”€â”€ db/
â”‚ â”‚ â””â”€â”€ index.js # MongoDB connection
â”‚ â”œâ”€â”€ middleware/
â”‚ â”‚ â”œâ”€â”€ auth.middleware.js # JWT authentication middleware
â”‚ â”‚ â””â”€â”€ user.middleware.js # Optional user validations
â”‚ â”œâ”€â”€ models/
â”‚ â”‚ â”œâ”€â”€ user.model.js # User schema
â”‚ â”‚ â””â”€â”€ otp.model.js # OTP schema
â”‚ â”œâ”€â”€ routes/
â”‚ â”‚ â”œâ”€â”€ user.routes.js # Email/password user routes
â”‚ â”‚ â””â”€â”€ otp.routes.js # OTP authentication routes
â”‚ â”œâ”€â”€ utils/
â”‚ â”‚ â”œâ”€â”€ ApiErrors.js # Custom error class
â”‚ â”‚ â”œâ”€â”€ ApiResponse.js # Unified response class
â”‚ â”‚ â”œâ”€â”€ asyncHandler.js # Async error wrapper
â”‚ â”‚ â”œâ”€â”€ isValidMobile.js # Mobile number validation helper
â”‚ â”‚ â”œâ”€â”€ otpGenerator.js # OTP generator utility
â”‚ â”‚ â”œâ”€â”€ sendSMS.js # Fast2SMS integration
â”‚ â”‚ â””â”€â”€ sendEmail.js # Brevo email integration
â”‚ â”œâ”€â”€ app.js # Express app setup and routes
â”‚ â””â”€â”€ index.js # Server entry point
â”œâ”€â”€ .env
â”œâ”€â”€ .gitignore
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

---

## âš™ï¸ Installation & Setup

### 1ï¸âƒ£ Install Dependencies
```bash
npm install
```

### 2ï¸âƒ£ Environment Variables

Create a `.env` file in the root directory:

```env
PORT=5000
MONGO_URI=your_mongodb_connection_string
JWT_SECRET=your_secret_key
CORS_ORIGIN=http://localhost:3000
FAST2SMS_API_KEY=your_fast2sms_api_key

```

### 3ï¸âƒ£ Running the Server

**Development mode:**
```bash
npm run dev
```

**Production mode:**
```bash
npm start
```

Server will run at: `http://localhost:5000`

---

## ğŸ“‚ Folder Breakdown

### **controllers/**
Contains business logic and request handlers for API endpoints.
- `user.controller.js` - Handles email/password registration, login, password reset, and code verification.
- `otp.controller.js`  - Handles sending OTP, verifying OTP, and login authentication.

### **db/**
Database connection and configuration.
- `index.js` - MongoDB connection setup

### **middleware/**
Custom middleware for authentication, validation, etc.
- `auth.middleware.js` - Verifies JWT tokens for protected routes.

### **models/**
Mongoose schemas and models.
- `user.model.js` - User schema with email/password, mobile, role, and preferences.
- `otp.model.js` - Defines OTP structure with expiry time.

### **routes/**
API route definitions linked to controllers.
- `user.route.js` - User-related routes
- `otp.routes.js` - All routes related to authentication and OTP flow.

### **utils/**
Reusable helper functions and utilities.
- `otp.routes.js`   - All routes related to authentication and OTP flow.
- `ApiErrors.js`    - Centralized error handling.
- `ApiResponse.js`  - Consistent API response structure.
- `asyncHandler.js` - Wraps async route handlers.
- `isValidMobile.js`- Validates Indian mobile numbers.
- `otpGenerator.js` - Generates random 6-digit OTPs.
- `sendSMS.js`      - Sends OTP messages using Fast2SMS
- `sendEmail.js`    - Sends verification/reset emails via Brevo.
### **app.js**
Express application setup, middleware configuration, and route mounting.

### **index.js**
Server entry point that starts the application.

---

## ğŸš€ Features Implemented

- âœ… OTP-based user registration
- âœ… OTP login authentication
- âœ… JWT token generation for secure access
- âœ… Error and response handling via utility classes
- âœ… Modular folder structure
- âœ… Auth middleware for protected routes
- âœ… Email/password registration and login
- âœ… Password reset via email verification code

---

## ğŸ”® Planned Features
- ğŸ”„ Google / Email login integration
- ğŸ”„ Role-based access (User, Lawyer, Admin)
- ğŸ”„ Multi-language support
- ğŸ”„ User and Lawyer profile dashboards
- ğŸ”„ Secure document management
- ğŸ”„ Lawyerâ€“User chat system

## ğŸ“ API Documentation

| Endpoint                        | Method | Description                           |
| ------------------------------- | ------ | ------------------------------------- |
| `/api/v1/otp/send`              | POST   | Send OTP to mobile number             |
| `/api/v1/otp/verify`            | POST   | Verify OTP & create user account      |
| `/api/v1/otp/login`             | POST   | Verify OTP for login                  |
| `/api/v1/user/register`         | POST   | Register user with email & password   |
| `/api/v1/user/login`            | POST   | Login user with email & password      |
| `/api/v1/user/forgot-password`  | POST   | Request password reset code via email |
| `/api/v1/user/verify-reset-code`| POST   | Verify password reset code            |
| `/api/v1/user/reset-password`   | POST   | Reset password using verified code    |
| `/api/v1/protected`             | GET    | Example of protected route using JWT middleware |

---

## ğŸ¤ Contributing

We welcome contributions from everyone! Please follow the standard fork â†’ branch â†’ pull request workflow.

ğŸ§© Contribution Guidelines:

-   For all asynchronous operations, use the predefined asyncHandler() wrapper function for consistent and centralized error handling.
-   When throwing errors, always use the ApiErrors class for better error structure and readability.
-   When sending API responses, use the ApiResponse class to ensure consistency and cleaner code.
-   Follow the modular architecture â€” avoid repeating logic and keep code reusable across the application.
-   This ensures maintainability, scalability, and consistent behavior throughout the project.

---

## ğŸ“„ License
